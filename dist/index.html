<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="../dist/build.css" rel="stylesheet"> -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <style>
        /*! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com*/
        *,
        :after,
        :before {
            box-sizing: border-box;
            border: 0 solid #e5e7eb
        }

        :after,
        :before {
            --tw-content: ""
        }

        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
            font-feature-settings: normal;
            font-variation-settings: normal
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: initial
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        [type=button],
        [type=reset],
        [type=submit],
        button {
            -webkit-appearance: button;
            background-color: initial;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: initial
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0
        }

        fieldset,
        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::-moz-placeholder,
        textarea::-moz-placeholder {
            opacity: 1;
            color: #9ca3af
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden] {
            display: none
        }

        *,
        ::backdrop,
        :after,
        :before {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: #3b82f680;
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia:
        }

        .fixed {
            position: fixed !important
        }

        .sticky {
            position: sticky !important
        }

        .inset-x-0 {
            left: 0 !important;
            right: 0 !important
        }

        .bottom-0 {
            bottom: 0 !important
        }

        .top-0 {
            top: 0 !important
        }

        .z-0 {
            z-index: 0 !important
        }

        .z-10 {
            z-index: 10 !important
        }

        .m-2 {
            margin: .5rem !important
        }

        .mb-16 {
            margin-bottom: 4rem !important
        }

        .mb-3 {
            margin-bottom: .75rem !important
        }

        .mb-4 {
            margin-bottom: 1rem !important
        }

        .flex {
            display: flex !important
        }

        .aspect-square {
            aspect-ratio: 1/1 !important
        }

        .h-16 {
            height: 4rem !important
        }

        .h-full {
            height: 100% !important
        }

        .min-h-\[200px\] {
            min-height: 200px !important
        }

        .max-w-\[150px\] {
            max-width: 150px !important
        }

        .shrink {
            flex-shrink: 1 !important
        }

        .grow {
            flex-grow: 1 !important
        }

        .cursor-pointer {
            cursor: pointer !important
        }

        .flex-col {
            flex-direction: column !important
        }

        .place-content-around {
            place-content: space-around !important
        }

        .items-center {
            align-items: center !important
        }

        .justify-center {
            justify-content: center !important
        }

        .justify-around {
            justify-content: space-around !important
        }

        .gap-2 {
            gap: .5rem !important
        }

        .gap-3 {
            gap: .75rem !important
        }

        .rounded-lg {
            border-radius: .5rem !important
        }

        .rounded-t-lg {
            border-top-left-radius: .5rem !important;
            border-top-right-radius: .5rem !important
        }

        .rounded-tl-none {
            border-top-left-radius: 0 !important
        }

        .rounded-tr-none {
            border-top-right-radius: 0 !important
        }

        .border {
            border-width: 1px !important
        }

        .border-t-4 {
            border-top-width: 4px !important
        }

        .border-slate-700 {
            --tw-border-opacity: 1 !important;
            border-color: rgb(51 65 85/var(--tw-border-opacity)) !important
        }

        .bg-slate-500 {
            --tw-bg-opacity: 1 !important;
            background-color: rgb(100 116 139/var(--tw-bg-opacity)) !important
        }

        .bg-slate-600 {
            --tw-bg-opacity: 1 !important;
            background-color: rgb(71 85 105/var(--tw-bg-opacity)) !important
        }

        .bg-slate-700 {
            --tw-bg-opacity: 1 !important;
            background-color: rgb(51 65 85/var(--tw-bg-opacity)) !important
        }

        .bg-slate-900 {
            --tw-bg-opacity: 1 !important;
            background-color: rgb(15 23 42/var(--tw-bg-opacity)) !important
        }

        .py-2 {
            padding-top: .5rem !important;
            padding-bottom: .5rem !important
        }

        .pl-4 {
            padding-left: 1rem !important
        }

        .text-center {
            text-align: center !important
        }

        .text-4xl {
            font-size: 2.25rem !important;
            line-height: 2.5rem !important
        }

        .text-5xl {
            font-size: 3rem !important
        }

        .text-5xl,
        .text-7xl {
            line-height: 1 !important
        }

        .text-7xl {
            font-size: 4.5rem !important
        }

        .font-bold {
            font-weight: 700 !important
        }

        .font-extrabold {
            font-weight: 800 !important
        }

        .text-blue-400 {
            --tw-text-opacity: 1 !important;
            color: rgb(96 165 250/var(--tw-text-opacity)) !important
        }

        .text-orange-400 {
            --tw-text-opacity: 1 !important;
            color: rgb(251 146 60/var(--tw-text-opacity)) !important
        }

        .text-white {
            --tw-text-opacity: 1 !important;
            color: rgb(255 255 255/var(--tw-text-opacity)) !important
        }

        .hover\:bg-slate-500:hover {
            --tw-bg-opacity: 1 !important;
            background-color: rgb(100 116 139/var(--tw-bg-opacity)) !important
        }
    </style>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script defer>
        //WS and ESP32 comminication code
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Year', 'humidity', 'temp'],
                ['-48', 33, 22],
                ['-42', 30, 11],
                ['-36', 35, 6],
                ['-30', 35, 6],
                ['-24', 35, 15],
                ['-18', 35, 26],
                ['-12', 35, 1],
                ['-6', 40, 10],
                ['now', 20, 10],
            ]);

            var options = {
                title: 'Temperature and Humidity',
                curveType: 'none',
                legend: { position: 'bottom' },
                backgroundColor: '#1F1F1F',
                legendTextStyle: { color: '#FFF' },
                titleTextStyle: { color: '#FFF' },
                vAxis: {
                    textStyle: { color: '#FFF', },
                },
                hAxis: {
                    textStyle: { color: '#FFF', },
                }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }

        function updatechart() {
            document.getElementById('curve_chart').innerHTML = ""
            drawChart()
        }
        function openDoor() {
            fetch("/open");
        }
        setInterval(updatechart, 1000);
        setInterval(updatePrintrState, 2500);
        updatePrintrState()
        let printerState = false
        let doorState = false
        function updatePrintrState() {
            fetch("/printerState")
                .then((res) => {
                    return res.json
                })
                .then((res) => {
                    printerState = res.state
                    doorState = res.door
                    updateDOM();
                })

        }
        const printer = document.querySelector(".printer");
        const printerText = document.querySelector(".printerTetxt");
        const door = document.querySelector(".door");
        const doorText = document.querySelector(".doorText");
        function updateDOM() {

            if (doorState) {
                door.innerHTML = "door_open"
                doorText.innerHTML = "Oppend"
            }
            else {
                door.innerHTML = "door_front"
                doorText.innerHTML = "closed"
            }

            if (printerState) {
                printer.innerHTML = "print_connect"
                printerText.innerHTML = "ON"
            }
            else {
                printer.innerHTML = "print_disabled"
                printerText.innerHTML = "OFF"
            }
        }

        function changePrinterState() {
            if (printerState)
                fetch("/printerOFF")
            else
                fetch("/printerON")
            updatePrintrState()
        }
    </script>
</head>

<body class="bg-slate-900 text-white h-full ">
    <div class="sticky top-0 z-10 text-4xl font-extrabold flex justify-center items-center h-16 bg-slate-500 mb-4">
        <h1>
            Smart Home
        </h1>
    </div>

    <div class="flex  justify-around  items-center mb-3 gap-2">
        <a onclick="openDoor()"
            class="flex flex-col  grow shrink items-center justify-center bg-slate-600 rounded-lg aspect-square  max-w-[150px] hover:bg-slate-500">
            <span class="material-symbols-outlined text-7xl door">
                door_front
                <!-- door_open -->
            </span>

            <span class="font-bold doorText">Closed</span>
        </a>
        <div onclick="changePrinterState()"
            class="flex flex-col grow shrink items-center justify-center bg-slate-600 rounded-lg aspect-square  max-w-[150px] hover:bg-slate-500">
            <span class="material-symbols-outlined text-7xl printer">
                print_disabled
                <!-- print_connect -->
            </span>
            <span class="font-bold printerText">OFF</span>
        </div>
    </div>
    <div class="mb-16">
        <div class="pl-4">temp : <span class="text-orange-400">25 C°</span> ; humidity : <span class="text-blue-400">33
                %</span></div>
        <div id="curve_chart" class="z-0 border grow m-2 min-h-[200px] text-white"></div>
    </div>
    <nav class="bg-slate-700 border-t-4 border-slate-700 flex place-content-around gap-3 fixed bottom-0 inset-x-0">
        <span
            class="text-white material-symbols-outlined text-center text-5xl grow rounded-t-lg rounded-tl-none  py-2 bg-slate-600 hover:bg-slate-500 cursor-pointer">
            surround_sound
        </span>
        <span
            class="text-white material-symbols-outlined text-center text-5xl grow rounded-t-lg -none  py-2 bg-slate-600 hover:bg-slate-500 cursor-pointer">
            home
        </span>
        <span
            class="text-white material-symbols-outlined text-center text-5xl grow rounded-t-lg rounded-tr-none  py-2 bg-slate-600 hover:bg-slate-500 cursor-pointer">
            lightbulb
        </span>
    </nav>
</body>

</html>